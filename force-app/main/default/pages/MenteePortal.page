<apex:page sidebar="false" showHeader="false" standardStylesheets="false" controller="MenteePortal_Controller" action="{!checkUserAuth}">
    <head docType="html-5.0">
        <c:MentorshipScripts />
        <apex:includeScript value="{!URLFOR($Resource.mentorship_resource, '/js/libs/angular-animate.min.js')}"/>  
        <apex:includeScript value="{!URLFOR($Resource.mentorship_resource, '/js/libs/angular-aria.min.js')}"/>
        <apex:includeScript value="{!URLFOR($Resource.mentorship_resource, '/js/libs/angular-sanitize.min.js')}"/>  
        <apex:includeScript value="{!URLFOR($Resource.mentorship_resource, '/js/libs/ui-bootstrap-tpls.min.js')}"/>  
        <apex:stylesheet value="{!URLFOR($Resource.mentorship_resource, '/styles/w3.min.css')}"/>
        
        <style>
            
            body {
            margin: 0;
            }
            .loadingBackground {
            position: fixed;
            height: 100%;
            width: 100%;
            background: #F6F6F6;
            z-index: 11111;
            opacity: 0.7;
            top: 0px;
            left: 0;
            bottom: 0;
            right: 0;
            }
            
            .loading {
            top: 50%;
            left: 50%;
            margin: -50px 0px 0px -50px;
            z-index: 111111;
            position: fixed;
            }
            .profile-pic {
            border: solid 2px;
            display: inline-block;
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background-repeat: no-repeat;
            background-position: center center;
            background-size: cover;
            
            }
            
            .upload-profile-pic {
            width:95%;
            height:170px;
            border-radius: 50%;
            border: solid 2px;
            background-repeat: no-repeat;
            background-position: center center;
            background-size: cover;
            }
            
            .upload-profile-pencil {
            z-index: 2;
            top: -50px;
            margin-left: 75%;
            position: relative;
            opacity: 0.6;
            }
            .card-profile-image img {
            box-shadow: 0 0 2rem 0 rgba(136, 152, 170, .15) !important;
            }
            
            .card-profile-image {
            position: relative;
            }
            
            .card-profile-image img {
            position: absolute;
            left: 50%;
            max-width: 70px;
            transition: all .15s ease;
            transform: translate(-50%, -30%);
            border-radius: .375rem;
            }
            
            .card {
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            transition: 0.3s;
            }
            
            .card:hover {
            box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
            }
            
            .card-profile-image img:hover {
            transform: translate(-50%, -33%);
            }
            
            .rounded-circle {
            border-radius: 50% !important;
            }
            
            .profileDetailCard {
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.2);
            transition: 0.3s;
            Fwidth: 73%;
            }
            
            .card {
            box-shadow: 0 10px 20px 0 rgba(0, 0, 0, 0.2);
            transition: 0.3s;
            width: 100%;
            margin-bottom: 20px;
            }
            
            .card:hover {
            box-shadow: 0 8px 16px 0 rgba(0, 0, 0, 0.2);
            }
            
            .container {
            padding: 2px 16px;
            /* margin-left: 20%;  */
            width: 90%;
            }
            
            .cardContainer {
            padding: 2px 16px;
            margin-left: 20%;
            }
            
            .column {
            float: left;
            width: 50%;
            padding: 10px;
            height: 300px;
            /* Should be removed. Only for demonstration */
            }
            
            
            /* Clear floats after the columns */
            
            .row:after {
            content: "";
            display: table;
            clear: both;
            }
            
            table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            /* width: 70%; */
            margin-top: 1%;
            border: 1px solid #ddd;
            }
            
            td,
            th {
            text-align: center;
            padding: 8px;
            }
            .navButtons:hover {
            opacity: 0.8;
            }
            
            .bg-light {
            background-color: #dde0e2 !important;
            }
            
            .rate {
            float: left;
            height: 46px;
            padding: 0 10px;
            }
            
            .rate:not(:checked)>input {
            position: absolute;
            top: -9999px;
            }
            
            .rate:not(:checked)>label {
            float: right;
            width: 1em;
            overflow: hidden;
            white-space: nowrap;
            cursor: pointer;
            font-size: 30px;
            color: #ccc;
            }
            
            .rate:not(:checked)>label:before {
            content: 'â˜… ';
            }
            
            .rate>input:checked~label {
            color: #ffc700;
            }
            
            .rate:not(:checked)>label:hover,
            .rate:not(:checked)>label:hover~label {
            color: #deb217;
            }
            
            .rate>input:checked+label:hover,
            .rate>input:checked+label:hover~label,
            .rate>input:checked~label:hover,
            .rate>input:checked~label:hover~label,
            .rate>label:hover~input:checked~label {
            color: #c59b08;
            }
            
            .my-custom-stars .button .material-icons {
            font-size: 50px;
            }
            
            .my-custom-stars .star-button.star-on .material-icons {
            color: red;
            }
            
            .my-custom-stars .star-button.star-off .material-icons {
            color: yellow;
            }
            
            .jk-rating-stars-container .button {
            cursor: pointer
            }
            
            .jk-rating-stars-container .button .material-icons {
            font-size: 30px
            }
            
            .jk-rating-stars-container .star-button {
            text-shadow: .06em .04em #000
            }
            
            .jk-rating-stars-container .star-button.star-on .material-icons {
            color: #ee9a00
            }
            
            .jk-rating-stars-container .star-button.star-off .material-icons {
            color: #ddd
            }
            
            .Rating {
            color: #a9a9a9;
            margin: 0;
            padding: 2px;
            float: right;
            }
            
            .uploadDocButton {
            Background-color: #F39C12;
            color: white;
            padding: 16px 20px;
            margin: 8px 0;
            border: none;
            cursor: pointer;
            width: 100%;
            opacity: 0.9;
            }
            
            /* table {
            font-family: arial, sans-serif;
            border-collapse: collapse;
            margin-top: 3%;
            } */
            
            td,
            th {
            border: 1px solid #dddddd;
            text-align: center;
            padding: 8px;
            }
            
            .tableHeader {
            font-family: Arial, Helvetica, sans-serif;
            border-collapse: collapse;
            width: 100%;
            font-size: larger;
            font-weight: bolder;
            }
            
            .tableHeader td,
            .tableHeader th {
            border: 1px solid #ddd;
            padding: 8px;
            }
            
            .tableHeader tr:nth-child(even) {
            background-color: #f2f2f2;
            }
            
            .tableHeader tr:hover {
            background-color: #ddd;
            }
            
            .tableHeader th {
            padding-top: 12px;
            padding-bottom: 12px;
            background-color: #032559;
            color: white;
            /* font-size: x-large; */
            text-align: center;
            }
            
            div {
            posititon: relative;
            }
            
            .js-nametag {
            position: absolute;
            }
            
            .js-nametag:nth-child(1) {
            animation-name: fade;
            animation-fill-mode: both;
            animation-iteration-count: infinite;
            animation-duration: 5s;
            animation-direction: alternate-reverse;
            }
            
            .js-nametag:nth-child(2) {
            animation-name: fade;
            animation-fill-mode: both;
            animation-iteration-count: infinite;
            animation-duration: 5s;
            animation-direction: alternate;
            }
            
            @keyframes fade {
            0%,
            50% {
            opacity: 0;
            }
            100% {
            opacity: 1;
            }
            }
            
            .download {
            background-color: #F39C12;
            color: white;
            padding: 5px 20px;
            cursor: pointer;
            }
            
            .download:hover {
            opacity: 0.7;
            }
            
            /* table css new */
            .styled-table {
            border-collapse: collapse;
            margin: 25px 0;
            font-size: 0.9em;
            font-family: sans-serif;
            min-width: 400px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.15);
            }
            
            .styled-table thead tr {
            background-color: #2e3192;
            color: #ffffff;
            text-align: left;
            }
            
            .styled-table th,
            .styled-table td {
            padding: 12px 15px;
            }
            
            .styled-table tbody tr {
            border-bottom: 1px solid #dddddd;
            }
            
            .styled-table tbody tr:nth-of-type(even) {
            background-color: #f3f3f3;
            }
            
            .styled-table tbody tr:last-of-type {
            border-bottom: 2px solid #2e3192;
            }
            
            .styled-table tbody tr.active-row {
            font-weight: bold;
            color: #2e3192;
            } 
            
            /* fallback */
            @font-face {
            font-family: 'Material Icons';
            font-style: normal;
            font-weight: 400;
            src: url(https://fonts.gstatic.com/s/materialicons/v85/flUhRq6tzZclQEJ-Vdg-IuiaDsNcIhQ8tQ.woff2) format('woff2');
            }
            
            .material-icons {
            font-family: 'Material Icons';
            font-weight: normal;
            font-style: normal;
            font-size: 24px;
            line-height: 1;
            letter-spacing: normal;
            text-transform: none;
            display: inline-block;
            white-space: nowrap;
            word-wrap: normal;
            direction: ltr;
            -webkit-font-feature-settings: 'liga';
            -webkit-font-smoothing: antialiased;
            }
        </style>
        <script>
        !(function () {
            "use strict";
            angular.module("jkAngularRatingStars", ["jkAngularRatingStars.templates"]);
        })(),
            (function () {
                angular.module("jkAngularRatingStars.templates", []).run([
                    "$templateCache",
                    function ($templateCache) {
                        $templateCache.put(
                            "rating-stars-directive.html",
                            '<div\n  class="jk-rating-stars-container"\n  layout="row" >\n\n  <a\n    class="button"\n    ng-click="ctrl.setRating(0)"\n    ng-if="!ctrl.readOnly" >\n      </a>\n\n  <a\n    class="button star-button"\n    ng-class="item.class"\n    ng-click="ctrl.setRating($index + 1)"\n    ng-repeat="item in ctrl.starsArray" >\n    <i class="material-icons">star</i>\n  </a>\n\n</div>\n'
                        );
                    },
                ]);
                    })();
                    (function () {
                    "use strict";
                    
                    function RatingStarsController($scope, $attrs, $timeout) {
                    var that = this;
                    void 0 === that.readOnly && (that.readOnly = !1),
                    (that.initStarsArray = function () {
                    (that.starsArray = that.getStarsArray()), that.validateStars();
                    }),
                    (that.getStarsArray = function () {
                    for (var starsArray = [], index = 0; index < that.maxRating; index++) {
                    var starItem = {
                        index: index,
                        class: "star-off"
                    };
                    starsArray.push(starItem);
                }
                return starsArray;
            }),
            (that.setRating = function (rating) {
                that.readOnly ||
                    ((that.rating = rating),
                     that.validateStars(that.rating),
                     $timeout(function () {
                         that.onRating({
                             rating: that.rating
                         }), $scope.$apply();
                     }));
            }),
            (that.setMouseOverRating = function (rating) {
                that.readOnly || that.validateStars(rating);
            }),
            (that.validateStars = function (rating) {
                if (that.starsArray && 0 !== that.starsArray.length)
                    for (var index = 0; index < that.starsArray.length; index++) {
                        var starItem = that.starsArray[index];
                        rating - 1 >= index ? (starItem["class"] = "star-on") : (starItem["class"] = "star-off");
                    }
            });
        }
        angular.module("jkAngularRatingStars").controller("RatingStarsController", ["$scope", "$attrs", "$timeout", RatingStarsController]);
        })(),
            (function () {
                "use strict";
                
                function RatingStarsDirective() {
                    function link(scope, element, attrs, ctrl) {
                        (!attrs.maxRating || parseInt(attrs.maxRating) <= 0) && (attrs.maxRating = "5"),
                            scope.$watch("ctrl.maxRating", function (oldVal, newVal) {
                                ctrl.initStarsArray();
                            }),
                            scope.$watch("ctrl.rating", function (oldVal, newVal) {
                                ctrl.validateStars(ctrl.rating);
                            });
                    }
                    return {
                        restrict: "E",
                        replace: !0,
                        templateUrl: "rating-stars-directive.html",
                        scope: {},
                        controller: "RatingStarsController",
                        controllerAs: "ctrl",
                        bindToController: {
                            maxRating: "@?",
                            rating: "=?",
                            readOnly: "=?",
                            onRating: "&"
                        },
                        link: link,
                    };
                }
                angular.module("jkAngularRatingStars").directive("jkRatingStars", [RatingStarsDirective]);
            })();
        
        
        </script>
    </head>
    <body ng-app="menteeDetailApp" ng-controller="menteeDetailController">
        <div class="loadingSection" id="spinner" ng-if="showSpinner">
            <div class="loadingBackground"></div>
            <div>
                <apex:image url="{!$Resource.loading}" styleClass="loading" />
            </div>
        </div>
        <div >
            <nav class="navbar fixed-top navbar-light bg-light navbar-expand-lg">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#">
                        <apex:image url="{!$Resource.FFEbanner}" width="50%" height="50%"/>
                    </a>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item active">
                                <a class="nav-link" href="#" ng-click="homepage()" >Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" ng-click="progDetails()">Modules</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" ng-click="sessionListing()">Sessions</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#" ng-click="selfAssesmentDetails()">Self Assesment</a>
                            </li>
                        </ul>
                    </div>
                    <div class="dropdown pmd-dropdown pmd-user-info ml-auto">
                        <a href="javascript:void(0);" class="btn-user dropdown-toggle media align-items-center" data-toggle="dropdown" data-sidebar="true" aria-expanded="false">
                            <img class="mr-2 profile-pic" ng-if="menteeDetail.Profile_Pic_Attachment_Id__c != undefined && menteeDetail.Profile_Pic_Attachment_Id__c != null && menteeDetail.Profile_Pic_Attachment_Id__c != ''" src="{!baseURL}servlet/servlet.FileDownload?file={{menteeDetail.Profile_Pic_Attachment_Id__c}}" width="40" height="40" alt="avatar"/>
                            <img class="mr-2 profile-pic" ng-if="menteeDetail.Profile_Pic_Attachment_Id__c == undefined || menteeDetail.Profile_Pic_Attachment_Id__c == null || menteeDetail.Profile_Pic_Attachment_Id__c == ''" src="https://www.pngitem.com/pimgs/m/146-1468479_my-profile-icon-blank-profile-picture-circle-hd.png" width="40" height="40" alt="avatar"/>
                            <div class="media-body">
                                {{menteeDetail.Name}}
                            </div>
                            <i class="material-icons md-light ml-2 pmd-sm">more_vert</i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-right" role="menu">
                            <a class="dropdown-item" href="javascript:void(0);" ng-click="editDetails();">Edit Profile</a>
                            <a class="dropdown-item" href="javascript:void(0);" ng-click="signOut();">Logout</a>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="main">
                <div class="container-fluid" style="margin-top:5%;">
                    <div class="row" ng-if="showProgramDetail">
                        <div class="col-sm-3"/> 
                        <div class="col-sm-6">
                            <div>
                                <!-- program details start-->
                                <table class="table styled-table">
                                    <thead>
                                        <tr>
                                            <th scope="col">SNO</th>
                                            <th scope="col">Module</th>
                                            <th scope="col">Curriculam</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="x in programDetails">
                                            <td>{{$index + 1}}</td>
                                            <td style="text-align:left;">{{x.programmeRec.Name}}</td>
                                            <td >
                                                {{x.programmeRec.curriculum__c}}
                                                <div ng-repeat="att in x.attId">
                                                    <button class="download btn btn-lg" ng-click="downloadDoc(att.Id)" style="margin-top:1%"><i class="fa fa-download"></i></button>
                                                   <span>
                                                     {{att.Name}}   
                                                    </span>
                                                </div>
                                                
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>                            
                            </div>
                        </div>
                        <div class="col-sm-3"/>
                    </div>
                    <!--Profile-->
                    <div class="row pt-5" ng-if="editable">
                        <div class="col-sm-3"/>
                        <div class="col-sm-6">
                            <!-- modal popup to change profile pic-->
                            <div id="profilePicModal" class="w3-modal">
                                <div class="w3-modal-content" >
                                    <header class="w3-container" style="background-color:#032559;color:white;">
                                        <span onclick="document.getElementById('profilePicModal').style.display='none'" 
                                              class="w3-button w3-display-topright">
                                            <i class="fa fa-times"></i>
                                        </span>
                                        <h1 style="font-weight: 600;">Upload</h1>
                                    </header>
                                    <div class="w3-container">
                                        <span >
                                            <div style="font-size: 12pt;padding-block: 60px;">
                                                <input type="file" id="profileFile" accept="image/*" style="background:grey;padding:4px; text-decoration: none; border-color:red;margin-left:30%;"/> 
                                            </div>
                                            <button class="uploadDocButton" style="width:100%;" ng-click="uploadProfilePic(menteeDetail.Id);">Upload</button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                            <div class="card shadow">
                                <div class="card-header bg-white border-0">
                                    <div class="row align-items-center">
                                    </div>
                                </div>
                                <div class="card-body">
                                    <form style="padding:40px;">
                                        <div class="pl-lg-4">
                                            <div class="row" style="border-bottom: solid 1px;">
                                                <div class="col-lg-4">
                                                </div>
                                                <div class="col-lg-4">
                                                    <span>
                                                        <div ng-hide="menteeDetail.Profile_Pic_Attachment_Id__c == undefined || menteeDetail.Profile_Pic_Attachment_Id__c == null || menteeDetail.Profile_Pic_Attachment_Id__c == ''">
                                                            <img src="{!baseURL}servlet/servlet.FileDownload?file={{menteeDetail.Profile_Pic_Attachment_Id__c}}" class="upload-profile-pic" /> 
                                                        </div>
                                                        <div ng-show="menteeDetail.Profile_Pic_Attachment_Id__c == undefined || menteeDetail.Profile_Pic_Attachment_Id__c == null || menteeDetail.Profile_Pic_Attachment_Id__c == ''">
                                                            <img src="https://www.pngitem.com/pimgs/m/146-1468479_my-profile-icon-blank-profile-picture-circle-hd.png"  class="upload-profile-pic"  / >
                                                        </div>
                                                        <button class="upload-profile-pencil" onclick="document.getElementById('profilePicModal').style.display='block'">
                                                            <i class='fa fa-pencil' style='font-size:28px'></i>
                                                        </button>
                                                    </span>
                                                </div>
                                                <div class="col-lg-4">
                                                    <!--button class="download"  style="margin-top:85%;background-color:#ff793c;"><i class='fa fa-pencil' style='font-size:36px'></i>Change</button-->  
                                                </div>
                                            </div>
                                        </div>
                                        <h3 class="heading-small text-muted mb-4">User information</h3>
                                        <div class="pl-lg-4">
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-username">Username</label>
                                                        <input type="text" id="input-username" class="form-control form-control-alternative" value="{{menteeDetail.Name}}" ng-model="menteeDetail.Name"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group">
                                                        <label class="form-control-label" for="input-email">Email address</label>
                                                        <input type="email" id="input-email" class="form-control form-control-alternative" value="{{menteeDetail.Email}}" ng-model="menteeDetail.Email" disabled="true"/>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-first-name">First name</label>
                                                        <input type="text" id="input-first-name" class="form-control form-control-alternative" placeholder="First name" value="menteeDetail.FirstName" ng-model="menteeDetail.FirstName"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-last-name">Last name</label>
                                                        <input type="text" id="input-last-name" class="form-control form-control-alternative" placeholder="Last name" value="menteeDetail.LastName" ng-model="menteeDetail.LastName" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-first-name">Phone</label>
                                                        <input type="text" id="input-first-name" class="form-control form-control-alternative" placeholder="Phone" value="menteeDetail.Phone" ng-model="menteeDetail.Phone"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-last-name">College Name</label>
                                                        <input type="text" id="input-last-name" class="form-control form-control-alternative" placeholder="College Name" value="menteeDetail.College_Name__c" ng-model="menteeDetail.College_Name__c" disabled="true" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-lg-6">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-first-name">College Location</label>
                                                        <input type="text" id="input-first-name" class="form-control form-control-alternative" placeholder="College Location" value="menteeDetail.College_Location__c" ng-model="menteeDetail.College_Location__c"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-6">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-last-name">Gender</label>
                                                        <input type="text" id="input-last-name" class="form-control form-control-alternative" placeholder="Gender" value="menteeDetail.Gender__c" ng-model="menteeDetail.Gender__c" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-4"/>
                                        <!-- Address -->
                                        <h3 class="heading-small text-muted mb-4">Contact information</h3>
                                        <div class="pl-lg-6">
                                            <div class="row">
                                                <div class="col-lg-4">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-city">City</label>
                                                        <input type="text" id="input-city" class="form-control form-control-alternative" placeholder="City" value="menteeDetail.MailingCity" ng-model="menteeDetail.MailingCity"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="form-group focused">
                                                        <label class="form-control-label" for="input-country">Country</label>
                                                        <input type="text" id="input-country" class="form-control form-control-alternative" placeholder="Country" value="menteeDetail.MailingCountry" ng-model="menteeDetail.MailingCountry"/>
                                                    </div>
                                                </div>
                                                <div class="col-lg-4">
                                                    <div class="form-group">
                                                        <label class="form-control-label" for="input-country">Postal code</label>
                                                        <input type="number" id="input-postal-code" class="form-control form-control-alternative" placeholder="Postal code" value="" ng-model="menteeDetail.MailingPostalCode" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <hr class="my-4" />
                                        <div style="text-align: center;">
                                            <buton class="download btn btn-lg" ng-click="saveMenteeDetails()">Save</buton>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-3"/>
                    </div>
                    <!--Sessions-->
                    <div class="row pt-5" ng-show="showSessionListing">
                        <div class="col-sm-2"/>
                        <div class="col-sm-8">
                            <!-- session details start-->
                            <div ng-show="showNoSessions" style="font-size:25px;margin-top:20px;text-align:center;">
                                No sessions to display as mentor has not been assigned.
                            </div>
                            <div class="card text-center shadow-lg bg-body rounded" style="width:100%;margin-left:00px;" ng-hide="showNoSessions">
                                <div class="card-header">
                                    <h3 style="text-align: center;font-weight: 600;">
                                        ALL SESSIONS
                                    </h3>
                                </div>
                                <div class="card-body">
                                    <div class="progress" style="margin-top: 2%;">
                                        <!-- <div style="text-align:center;">{{sessionPercentComputation}}% Complete</div> -->
                                        <div class="progress-bar progress-bar-animated progress-bar-striped" role="progressbar"
                                             aria-valuenow="100" aria-valuemin="0" aria-valuemax="200" ng-style="{width : ( sessionPercentComputation + '%' ) }">
                                            <span ng-if="sessionPercentComputation > 6">{{sessionPercentComputation}}% Complete</span>
                                        </div>
                                    </div>
                                    <table class="table styled-table" style="    table-layout: fixed;">
                                        <thead >
                                            <tr>
                                                <th scope="col" style="">Description</th>
                                                <th scope="col">Date</th>
                                                <th scope="col">Start Time</th>
                                                <th scope="col">End Time</th>
                                                <th scope="col">Session Topics</th>
                                                <th scope="col">Status</th>
                                                <th scope="col" style="width: 20%;">More Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr ng-repeat="session in sessionList">
                                                <td>{{session.Description__c}}</td>
                                                <td>{{session.Date__c}}</td>
                                                <td>{{session.Time__c | date:'shortTime'}}</td>
                                                <td>{{session.End_time__c | date:' hh:mma'}}</td>
                                                <td>
                                                    <p ng-bind-html="session.Agenda__c"></p>
                                                    <div>Meeting Link : {{session.Meeting_Link__c}}</div>
                                                </td>
                                                <td>{{session.Status__c}}
                                                </td>
                                                <td>
                                                    <div class="btn-group dropright">
                                                        <button type="download btn btn-lg" ng-click="viewSessionDetails($index)" class="btn btn-secondary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="Background-color:#F39C12;color: white;width: max-content;">
                                                            More Actions<i class="	fa fa-chevron-circle-down" style="float: right;font-size: 17px;padding:2px;"></i>
                                                        </button>
                                                        <div class="dropdown-menu" style="width: max-content;">
                                                            <li><a class="dropdown-header" onclick="document.getElementById('feedbackPopup').style.display='block'">Feedback <i class="fa fa-pencil" aria-hidden="true" style="float: right;"></i></a></li>
                                                            <li><a class="dropdown-item" href="#" onclick="document.getElementById('docsPopup').style.display='block'">Upload Docs<i class="fa fa-upload" aria-hidden="true" style="float: right;"></i></a></li>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div id="feedbackPopup" class="w3-modal">
                                <div class="w3-modal-content">
                                    <header class="w3-container " style="background-color:#032559;color:white;">
                                        <span  ng-click="closeFeedback()"
                                              class="w3-button w3-display-topright" style="top: 15px;" >
                                            <i class="fa fa-times"></i>
                                        </span>
                                        <h1 style="font-weight: 600;">Feedback</h1>
                                    </header>
                                    <div class="w3-container">
                                        <div class="row">
                                            <div class="col-md-2" >
                                            </div>
                                            <div class="col-md-8" style="text-align-last: center;margin-top:1%;" >
                                                <div >
                                                    <button type="button"  class="btn btn-primary" style="Background-color:#F39C12;" ng-click="feedbackByMentee()">Your Feedback</button>
                                                    <button type="button"  class="btn btn-primary" style="Background-color:#F39C12;" ng-show="showNoFeedbackByMentor" ng-click="showFeedbackByMentor()">Mentor Feedback</button>  
                                                    <span ng-hide="showNoFeedbackByMentor">
                                                        No feedback given by mentor
                                                    </span>
                                                </div>
                                                <hr/>
                                                <div ng-show="MentorFeedback">
                                                    <div class="card" style="width:100%;margin-left:0%;">
                                                        <div class="card-body">
                                                            <div >
                                                                <blockquote class="blockquote mb-0">
                                                                    <div class="form-group">
                                                                        <div class="" >
                                                                            <jk-rating-stars 
                                                                                             max-rating="5" 
                                                                                             rating="mentorRating" 
                                                                                             on-rating="onMentorRating(rating)" read-Only="true">
                                                                            </jk-rating-stars>
                                                                        </div>
                                                                        <div style="margin-top:2%;">
                                                                            {{mentorDescription}}
                                                                           
                                                                        </div>
                                                                    </div>
                                                                </blockquote>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div ng-show="showAllMenteeFeedback">
                                                    <div class="card" ng-show="MenteeFeedback" style="width:100%;margin-left:0%;">
                                                        <div class="card-body">
                                                            <div class="" ng-disabled="true" disabled="true">
                                                                <jk-rating-stars 
                                                                                 max-rating="5" 
                                                                                 rating="menteeRating" 
                                                                                 on-rating="onMenteeRating(rating)" read-Only="true">
                                                                </jk-rating-stars>
                                                            </div>
                                                            <blockquote class="blockquote mb-0">
                                                                <div class="form-group" style="margin-top:2%;">
                                                                    {{menteeDescription}}
                                                                    <!--textarea class="form-control" rows="3" id="comment" label="comment" placeholder="feedback Comment" 
ng-disabled="disableInput" ng-model="menteeDescription"></textarea-->   
                                                                </div>
                                                            </blockquote>
                                                        </div>
                                                    </div>
                                                    <div class="card" ng-show="giveFeedback" style="width:100%;margin-left:0%;">
                                                        <div class="card-body">
                                                            <div class="" >
                                                                <div>
                                                                    Give Feedback
                                                                </div>
                                                                <jk-rating-stars 
                                                                                 max-rating="5" 
                                                                                 rating="menteeRating" 
                                                                                 on-rating="onMenteeRating(rating)" read-Only="disableInput">
                                                                </jk-rating-stars>
                                                            </div>
                                                            <blockquote class="blockquote mb-0">
                                                                <div class="form-group" style="margin-top:2%;">
                                                                    <textarea class="form-control" rows="3" id="comment" label="comment" placeholder="feedback Comment" 
                                                                              ng-disabled="disableInput" ng-model="menteeDescription"></textarea>   
                                                                </div>
                                                                <button type="button" class="btn btn-primary" ng-click="submitFeedBack()" style="margin-left:85%;Background-color:#4B67B3;">Submit</button>
                                                            </blockquote>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-2" >
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Upload doc popup-->
                            <div id="docsPopup" class="w3-modal">
                                <div class="w3-modal-content">
                                    <header class="w3-container " style="background-color:#032559;color:white;">
                                        <span  ng-click="closeDocumentPopup()"
                                              class="w3-button w3-display-topright" style="top: 15px;" >
                                            <i class="fa fa-times"></i>
                                        </span>
                                        <h1 style="font-weight: 600;">Upload Docs</h1>
                                    </header>
                                    <div class="w3-container">
                                        <span >
                                            <div style="font-size: 12pt;padding-block: 60px;">
                                                <input type="file" id="attachmentFile" accept="application/msword,application/pdf" style="padding:4px; text-decoration: none; border-color:red;margin-left:30%;"/> 
                                            </div>
                                            <button class="uploadDocButton" style="width:100%;" ng-click="uploadDoc(session.Id);">Upload</button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-2"/>
                    </div>
                    <div class="row pt-5" ng-if="showSelfAssesment">
                        <div class="col-sm-2"/>
                        <div class="col-sm-8">
                            <!-- SelfAssesment Page Start -->
                            <div class="card" >
                                <div class="card-header">
                                    <div class="d-flex justify-content-center p-1"><h3><b>Pre Self Assesment question and answers</b></h3></div>
                                </div>
                                <div class="card-body">
                                    <h2 style="text-align:center;">
                                        1-Bad,2-Better,3-Good ,4-Very Good,5-Excellent
                                    </h2>
                                    <table class="table mentorTable">
                                        <tr>
                                            <th colspan="1" style="text-align: left;font-size: 20px;">Skill Categorey</th>
                                            <th colspan="1" style="text-align: left;font-size: 20px;"><span style="margin-left:15%">Question</span></th>
                                        </tr>
                                        <tbody>
                                            <tr ng-repeat="x in selfAssessmentQuestions">
                                                <td style="text-align: left;font-size: 20px;"><b>{{x.templateQuestion}}</b></td>
                                                <td>
                                                    <table class="mentorTable">
                                                        <thead>
                                                        </thead>
                                                        <tbody>
                                                            <tr ng-repeat="y in x.allQuestions" >
                                                                <td style="text-align: left;width: 65%;"><b>{{y.questionRec.Question__c}}</b></td>
                                                                <td style="text-align: right">
                                                                    <div ng-if="y.questionRec.Type__c =='Picklist'">
                                                                        <select ng-model="y.questionRec.FinalAnswer__c" class="form-control">
                                                                            <option ng-repeat="z in y.optionList" > {{z}}</option>
                                                                        </select>
                                                                        <p>{{optionValues}}</p>
                                                                    </div>
                                                                    <div ng-if="y.questionRec.Type__c =='Checkbox'">
                                                                        <input type="{{y.questionRec.Type__c}}" ng-model="y.questionRec.FinalAnswer__c" />
                                                                    </div>
                                                                    <div ng-if="y.questionRec.Type__c =='Text'">
                                                                        <input type="y.questionRec.Type__c" ng-model="y.questionRec.FinalAnswer__c" class="form-control"/>
                                                                    </div>
                                                                    <div ng-if="y.questionRec.Type__c =='Date'">
                                                                        <input type="date" ng-model="y.questionRec.FinalAnswer__c" class="form-control"/>
                                                                    </div>
                                                                    <div ng-if="y.questionRec.Type__c =='Number'">
                                                                        <input type="text" ng-model="y.questionRec.FinalAnswer__c" class="form-control" ng-keyup="checkForRating(y.questionRec.FinalAnswer__c)"/>
                                                                    </div>
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                    <div class="d-flex justify-content-center mt-3 mb-3">
                                        <button type="button" class="download btn btn-lg" ng-click="saveResult()" style="background-color:#F39C12;" >Save</button>
                                    </div>
                                </div>
                            </div>
                            <!-- selfAssesment page end-->
                        </div>
                        <div class="col-sm-2"/>
                    </div>
                </div>
                
                <div calss="row" ng-if="showHomepage">
                    <div class="col-sm">
                        <!-- home page start-->
                        <div style="height:100%;">
                            <section>
                                <div class="row" style="height:100%;">
                                    <div class="col-md-6" style="background-color:Orange;height:500px">
                                        <div class="w3-container">
                                            <div style="margin-top:20%;">
                                                <p class="js-nametag" style="font-size: x-large;font-weight: 800;color: white;">Helping bright students achieve their dreams</p>
                                                <p class="js-nametag" style="font-size: x-large;font-weight: 800;color: white;">Helping her become financially
                                                    stronger today, So she can be the strength of the society tomorrow.
                                                    5000+ Girls Scholars
                                                </p>
                                                <p class="js-nametag" style="font-size: x-large;font-weight: 800;color: white;">Transforming future generations
                                                    one scholar at a time.
                                                    14,800 students with a scholarship amount more then $11.4 million.
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6" style="backgrond-color:Orange;height: 545px;">
                                        <div class="w3-container" style="margin-left: -30px;">
                                            <div class="js-nametag">
                                                <img src="https://mentoring-ffe.org/static/img/hero03.jpg" width="120%" />  
                                            </div>
                                            <div class="js-nametag">
                                                <img src="https://mentoring-ffe.org/static/img/hero01.jpg" width="120%" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row" style="margin-top:3%;">
                                    <div class="col-md-3"></div>
                                    <div class="col-md-6">
                                        <p style="font-family: 'roboto';color: #232323;font-size: 25px;padding-bottom: 30px;">
                                            Welcome to FFEâ€™s Mentoring Program.<br/><br/>
                                            We hope you will make the most of this opportunity. Wishing you all the best on your mentoring journey!.
                                            <br/>
                                            Please feel free to email us at mentoring@ffe.org if you have any questions.
                                        </p>
                                    </div>
                                    <div class="col-md-3"></div>
                                </div>
                            </section>
                        </div>
                        <!-- home page end-->
                    </div>
                </div>
                
            </div>
            <script>
            var maxStringSize = 6000000;    //Maximum String size is 6,000,000 characters
            var maxFileSize = 4350000;      //After Base64 Encoding, this is the max file size
            var chunkSize = 950000;         //Maximum Javascript Remoting message size is 1,000,000 characters
            var attachment;
            var attachmentName;
            var fileSize;
            var positionIndex;
            var doneUploading;
            var appId;
           
            //Method to prepare a file to be attached to the Account bound to the page by the standardController
            function uploadFile(param) {
                appId = param;
                if(appId != "") {
                    var file = document.getElementById('attachmentFile').files[0];
                    console.log(file);
                    if(file != undefined) {
                        if(file.size <= maxFileSize) {
                            attachmentName = file.name;
                            var fileReader = new FileReader();
                            fileReader.onloadend = function(e) {
                                attachment = window.btoa(this.result);  //Base 64 encode the file before sending it
                                positionIndex=0;
                                fileSize = attachment.length;
                                console.log("Total Attachment Length: " + fileSize);
                                doneUploading = false;
                                if(fileSize < maxStringSize) {
                                    uploadAttachment(null);
                                } else {
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Internal error',
                                        text: 'Base 64 Encoded file is too large.  Maximum size is ' + maxStringSize + ' your file is ' + fileSize + '.',
                                    }) 
                                }
                                
                            }
                            fileReader.onerror = function(e) {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'There was an error reading the file.  Please try again.',
                                })
                                
                            }
                            fileReader.onabort = function(e) {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'There was an error reading the file.  Please try again.',
                                })
                            }
                            
                            fileReader.readAsBinaryString(file);  //Read the body of the file
                            
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'Internal error',
                                text: 'File must be under 4.3 MB in size.  Your file is too large.  Please try again.',
                            })
                        }
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Internal error',
                            text: 'You must choose a file before trying to upload it',
                        })
                    }
                }else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Internal error',
                        text: 'Cannot upload document',
                    })
                }
                
            }
            
            //Method to send a file to be attached to the Account bound to the page by the standardController
            //Sends parameters: Account Id, Attachment (body), Attachment Name, and the Id of the Attachment if it exists to the controller   
            function uploadAttachment(fileId) {
                // $scope.showSpinner = true;
                var attachmentBody = "";
                if(fileSize <= positionIndex + chunkSize) {
                    attachmentBody = attachment.substring(positionIndex);
                    doneUploading = true;
                } else {
                    attachmentBody = attachment.substring(positionIndex, positionIndex + chunkSize);
                }
                console.log("Uploading " + attachmentBody.length + " chars of " + fileSize);
                MenteePortal_Controller.doUploadAttachment(
                    appId, attachmentBody, attachmentName, 
                    function(result, event) {
                        console.log(result);
                        if(event.status){
                            document.getElementById('docsPopup').style.display='none';
                            Swal.fire(
                                '',
                                'Uploaded document successfully!',
                                'success'
                            )
                        }
                        if(event.type === 'exception') {
                            console.log("exception");
                            console.log(event);
                        } else if(event.status) {
                            
                            if(result.substring(0,3) == '00P') {
                                if(doneUploading == true) {
                                    MenteePortal_Controller.doUploadAttachment(appId, function(result, event) {
                                        if(event.status && result) {
                                            document.getElementById('jumboText').innerHTML = 'Document uploaded successfully.';
                                            document.getElementById('docsPopup').style.display='none';
                                            //$scope.showSpinner = false;
                                        }
                                        
                                    });
                                    /* window.open("/", "_blank");
                                    window.location.reload(); */
                                } else {
                                    positionIndex += chunkSize;
                                    uploadAttachment(result);
                                }
                            }
                        } else {
                            console.log(event.message);
                        }
                    },
                    {buffer: true, escape: true, timeout: 120000}
                );
            }
            
            function uploadProfilePic(param) {
                menteeId = param;
                if(menteeId != "") {
                    var file = document.getElementById('profileFile').files[0];
                    console.log(file);
                    if(file != undefined) {
                        if(file.size <= maxFileSize) {
                            attachmentName = file.name;
                            var fileReader = new FileReader();
                            fileReader.onloadend = function(e) {
                                attachment = window.btoa(this.result);  //Base 64 encode the file before sending it
                                positionIndex=0;
                                fileSize = attachment.length;
                                console.log("Total Attachment Length: " + fileSize);
                                doneUploading = false;
                                if(fileSize < maxStringSize) {
                                    uploadProfile(null);
                                } else {
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Internal error',
                                        text: 'Base 64 Encoded file is too large.  Maximum size is ' + maxStringSize + ' your file is ' + fileSize + '.',
                                    })
                                }
                            }
                            fileReader.onerror = function(e) {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'There was an error reading the file.  Please try again.',
                                })
                            }
                            fileReader.onabort = function(e) {
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'There was an error reading the file.  Please try again.',
                                })
                            }
                            fileReader.readAsBinaryString(file);  //Read the body of the file
                            
                        } else {
                            Swal.fire({
                                icon: 'error',
                                title: 'Internal error',
                                text: 'File must be under 4.3 MB in size.  Your file is too large.  Please try again.',
                            })
                        }
                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'Internal error',
                            text: 'You must choose a file before trying to upload it',
                        })
                    }
                }else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Internal error',
                        text: 'Cannot upload document',
                    })
                }
            }
            
            //Method to send a file to be attached to the Account bound to the page by the standardController
            //Sends parameters: Account Id, Attachment (body), Attachment Name, and the Id of the Attachment if it exists to the controller   
            function uploadProfile(fileId) {
                var attachmentBody = "";
                if(fileSize <= positionIndex + chunkSize) {
                    attachmentBody = attachment.substring(positionIndex);
                    doneUploading = true;
                } else {
                    attachmentBody = attachment.substring(positionIndex, positionIndex + chunkSize);
                }
                console.log("Uploading " + attachmentBody.length + " chars of " + fileSize);
                MenteePortal_Controller.doUploadProfilePic(
                    menteeId, attachmentBody, attachmentName, 
                    function(result, event) {
                        console.log(result);
                        if(event.type === 'exception') {
                            console.log("exception");
                            console.log(event);
                        } else if(event.status) {
                            if(result.substring(0,3) == '00P') {
                                if(doneUploading == true) {
                                    Swal.fire(
                                        '',
                                        'Profile picture updated successfully!',
                                        'success'
                                    )
                                    location.reload(true);
                                    
                                } else {
                                    positionIndex += chunkSize;
                                    uploadAttachment(result);
                                }
                            }
                        } else {
                            console.log(event.message);
                        }
                    },
                    {buffer: true, escape: true, timeout: 120000}
                );
            }
            </script>
            <script>
            var pageLoadData = JSON.parse('{!pageLoadInstanceString}');
            var app = angular.module('menteeDetailApp', ['ngMaterial' , 'jkAngularRatingStars','ngSanitize']);  
            app.controller('menteeDetailController', function($scope) {
                $scope.showSpinner = false;
                $scope.myText = "My name is:<ol><li>This example includes the &quot;angular-sanitize.js&quot;</li><li>This example includes the &quot;angular-sanitize.js&quot;</li><li>This example includes the &quot;angular-sanitize.js&quot;</li></ol>";
                $scope.myNewtext ="&lt;ol&gt;&lt;li&gt;This example includes the &amp;quot;angular-sanitize.js&amp;quot;&lt;/li&gt;&lt;li&gt;This example includes the &amp;quot;angular-sanitize.js&amp;quot;&lt;/li&gt;&lt;li&gt;This example includes the &amp;quot;angular-sanitize.js&amp;quot;&lt;/li&gt;&lt;/ol&gt";
                
                var menteeId = '{!$CurrentPage.parameters.Id}';
                $scope.menteeDetail; 
                $scope.editable = false;
                
                $scope.showDetails = false;
                $scope.showProgramDetail = false;
                $scope.showSessions = false;
                $scope.showHomepage = true;
                $scope.showSelfAssesment = false;
                $scope.mentorDescription = '';
                $scope.menteeDescription = '';
                $scope.mentorRating = 0;
                $scope.menteeRating = 0;
                $scope.showNoSessions = false;
                
                $scope.selfAssessmentQuestions=	pageLoadData["selfAssessmentQuestions"]; 
                $scope.selfAssessmentAnswers = [];
                $scope.checkboxVal;
                $scope.optionValues ;
                $scope.CurrentDate = new Date();
                $scope.getMenteeDetails = function() {
                    $scope.showSpinner = true;
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.getMenteeContactDetails}',
                        menteeId,
                        function(result, event){
                            
                            if(event.status){
                                $scope.menteeDetail = result;    
                                if($scope.menteeDetail.is_SelfAssesment_Completed__c == false){
                                    $scope.selfAssesmentDetails();
                                    Swal.fire('You will be assigned a mentor soon, please complete the Pre Self Assesment', '', 'info')
                                    
                                }
                                $scope.$apply();                                        
                            }
                            $scope.showSpinner = false;               
                        },
                        {escape: true}
                    );
                }
                $scope.getMenteeDetails();
                
                $scope.uploadDoc = function(param){
                    uploadFile(param)
                }
                
               
                $scope.editDetails = function(){
                    $scope.editable = true;
                    $scope.showDetails = false;
                    $scope.showProgramDetail = false;
                    $scope.showHomepage = false;
                    $scope.showSessionListing = false;
                    $scope.showSelfAssesment = false;
                }
                
                $scope.checkForRating = function(param){
                    if(param > 5){
                      Swal.fire({
                                    icon: 'info',
                                    title: '',
                                    text: 'rate yourself on the scale of 5',
                                })  
                    }
                }
                
                
                $scope.homepage = function(){
                    $scope.showProgramDetail = false;
                    $scope.showSessionListing = false;
                    $scope.showDetails = false;
                    $scope.editable = false;
                    $scope.showHomepage = true;
                    $scope.showSelfAssesment = false;
                }
                
                $scope.progDetails = function() {
                    $scope.showDetails = false;
                    $scope.showProgramDetail = true;
                    $scope.showSessionListing = false;
                    $scope.editable = false;
                    $scope.showHomepage = false;
                    $scope.showMentorFeedback = false;
                    $scope.showSelfAssesment = false;
                }
                
                $scope.programDetails =[];
                $scope.sessionList = [];	
                $scope.getprogramDetail = function(){
                    $scope.showSpinner = true;
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.getProgramDetails}',
                        function(result,event){
                            if(event.status){
                                
                                $scope.programDetails=result;
                                $scope.$apply();
                            }
                            else if (event.type==='exception'){
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }else{
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }
                            $scope.showSpinner = false;
                        },
                        {escape:true}
                    );
                }
                $scope.getprogramDetail();
                $scope.sessionListing = function(){
                    $scope.showProgramDetail = false;
                    $scope.showSessionListing = true;
                    $scope.showDetails = false;
                    $scope.editable = false;
                    $scope.showHomepage = false;
                    $scope.showMentorFeedback = false;
                    $scope.showSelfAssesment = false;
                } 
                
                $scope.getSessionDetail = function(){
                    $scope.showSpinner = true;
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.getAllSession}',
                        menteeId,
                        function(result,event){
                            if(event.status){
                                if(result != undefined || result != null){
                                    for(var i=0;i<result.length;i++){
                                        if(result[i].Agenda__c != undefined){
                                            result[i].Agenda__c = result[i].Agenda__c.replaceAll('&lt;','<');
                                            result[i].Agenda__c = result[i].Agenda__c.replaceAll('&gt;','>');
                                            result[i].Agenda__c = result[i].Agenda__c.replaceAll('&amp;quot;','"');
                                            result[i].Agenda__c = result[i].Agenda__c.replaceAll('&amp;','&');
                                        }
                                    }
                                }
                                $scope.sessionList = result;
                                if($scope.sessionList == undefined || $scope.sessionList == null || $scope.sessionList.length == 0){
                                    $scope.showNoSessions = true;
                                }else{
                                    $scope.showNoSessions = false;
                                    for(var i=0;i< $scope.sessionList.length;i++){
                                        var sessionDate = $scope.sessionList[i].Date__c ;
                                        $scope.sessionList[i].Time__c = $scope.sessionList[i].Time__c + $scope.sessionList[i].Date__c - 19800000;
                                         $scope.sessionList[i].End_time__c = $scope.sessionList[i].End_time__c + $scope.sessionList[i].Date__c- 19800000;
                                        var dateObject = new Date(sessionDate);
                                        
                                        var humanDateFormat = dateObject.toLocaleString();
                                        $scope.sessionList[i].Date__c = humanDateFormat.split(",")[0];
                                        
                                    }
                                    $scope.totalHours = $scope.sessionList[0].Mentor_Mentee_Association__r.Total_Mentoring_Hours__c;
                                    $scope.hoursCompleted = $scope.sessionList[0].Mentor_Mentee_Association__r.Duration_of_Sessions_Attended__c;
                                    $scope.sessionPercentComputation = (($scope.hoursCompleted * 100.00) / $scope.totalHours);
                                    if($scope.sessionPercentComputation)
                                    	$scope.sessionPercentComputation =  Math.round($scope.sessionPercentComputation);
                                }
                                $scope.$apply();
                                
                            }
                            else if (event.type==='exception'){
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }else{
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }
                            $scope.showSpinner = false;
                        },
                        {escape:true}
                    );
                }
                $scope.getSessionDetail();
                $scope.viewSessionDetails = function(index){
                    $scope.menteeFeedback = [];
                    $scope.showReschedule = false;
                    $scope.showMentorFeedback = false;
                    $scope.showMentorFeedback = false;
                    $scope.showSelfAssesment = false;
                    if($scope.sessionList.length > 0)
                        
                        $scope.session  = $scope.sessionList[index] ;
                    $scope.showDetails = true;
                    $scope.mentorDescription = '';
                    $scope.menteeDescription = '';
                    $scope.mentorRating = 0;
                    $scope.menteeRating = 0;
                    $scope.mentorFeedback = '';
                    $scope.showNoFeedbackByMentor = false;
                    $scope.MentorFeedback = false;
                    $scope.MenteeFeedback = false;
                    $scope.giveFeedback = false;
                    $scope.showAllMenteeFeedback = true;
                    
                    $scope.rescheduleSession = $scope.sessionList[index];
                    $scope.rescheduleSessionDate = new Date($scope.rescheduleSession.Date__c); 
                    if($scope.sessionList[index].Feedbacks__r != null){
                        
                        for(var i=0;i<$scope.sessionList[index].Feedbacks__r.length; i++){
                            if($scope.sessionList[index].Feedbacks__r[i].Feedback_given_by__c == "MENTOR"){
                                $scope.showMentorFeedback = true;
                                $scope.giveFeedback = false;
                                $scope.showNoFeedbackByMentor = true;
                                $scope.mentorFeedback = $scope.sessionList[index].Feedbacks__r[i];
                                $scope.mentorDescription = $scope.sessionList[index].Feedbacks__r[i].Description__c;
                                $scope.mentorRating = $scope.sessionList[index].Feedbacks__r[i].Mentor_Rating__c;
                                
                            }
                            if($scope.sessionList[index].Feedbacks__r[i].Feedback_given_by__c == "MENTEE"){
                                //$scope.disableInput = true;
                                $scope.showMenteeFeedback = true;
                                $scope.MenteeFeedback = true;
                                $scope.giveFeedback = false;
                                $scope.menteeFeedback = $scope.sessionList[index].Feedbacks__r[i];
                                $scope.menteeDescription = $scope.sessionList[index].Feedbacks__r[i].Description__c;
                                $scope.menteeRating = $scope.sessionList[index].Feedbacks__r[i].Mentee_Rating__c;
                            }
                            
                            
                        }
                        
                        
                    }else{
                        $scope.showMentorFeedback = false ;
                        $scope.disableInput = false;
                        $scope.showSubmitButton = true;
                        $scope.showNoFeedbackByMentor = false;
                        $scope.giveFeedback = true;
                        $scope.MenteeFeedback = false;
                    }
                    if($scope.menteeFeedback.length == 0){
                        $scope.disableInput = false;
                        $scope.showSubmitButton = true;
                        $scope.showMenteeFeedback = false;
                        $scope.giveFeedback = true;
                        $scope.MenteeFeedback = false;
                        
                    }
                }
                $scope.firstRate = 0;
                $scope.mentorRating;
                $scope.menteeRating;
                $scope.readOnly = true;
                
                $scope.onMentorRating = function(rating){
                    $scope.menteeRating = rating;
                    
                }; 
                $scope.submitFeedBack = function (){
                    $scope.session;
                    console.log('$scope.Description'+$scope.Description);
                    $scope.showSpinner = true;
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.submitFeedBack}',
                        $scope.session.Id,$scope.menteeDescription,$scope.menteeRating,
                        function(result,event){
                            if(event.status){
                                $scope.getSessionDetail();
                                $scope.disableInput = true;
                                $scope.showSubmitButton = false;
                                $scope.$apply();
                                Swal.fire(
                                    '',
                                    'Submitted feedback successfully!',
                                    'success'
                                )
                                document.getElementById('feedbackPopup').style.display='none';
                            }
                            else if (event.type==='exception'){
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }else{
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }
                            $scope.showSpinner = false;
                        },
                        {escape:true}
                    );
                    
                }
                
                $scope.applyForProgram = function(programId){
                    console.log('$scope.Description'+$scope.Description);
                    $scope.showSpinner = true;
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.insertMentorMenteeAssociation}',
                        menteeId,programId,	
                        function(result,event){
                            $scope.showSpinner = false;
                            if(event.status){
                                swal("Applied sucessfully!", "", "success");
                            }
                            else if (event.type==='exception'){
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }else{
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }
                        },
                        {escape:true}
                    );  
                }
                
                $scope.redirectURL = function(pageName){
                    let mainURL = window.location.origin+'/mentorship';
                    window.location.replace(mainURL + "/"+pageName+"?Id="+menteeId);
                }
                
                $scope.signOut = function(pageName){
                    $scope.showSpinner = true;
                    let mainURL = window.location.origin+'/mentorship';
                    window.location.replace(mainURL);
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.mentorSignOut}',
                        $scope.menteeDetail.Id,
                        function(result, event){
                            $scope.showSpinner = false;
                            if(event.status){
                                let mainURL = window.location.origin+'/mentorship';
                                window.location.replace(mainURL);
                            }               
                        },
                        {escape: true}
                    );
                }
                
                $scope.uploadProfilePic = function(menteeId){
                    $scope.showSpinner = true;
                    uploadProfilePic(menteeId);
                }
                
                $scope.saveMenteeDetails = function(){
                    $scope.showSpinner = true;
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.updateMenteeDetails}',
                        $scope.menteeDetail,
                        function(result, event){
                            $scope.showSpinner = false;
                            if(event.status){
                                swal("Saved sucessfully!", "", "success");
                                $scope.editable = false; 
                                $scope.showHomepage = true;
                                $scope.$apply();
                            }               
                        },
                        {escape: true}
                    );  
                    
                }
                
                $scope.markMenteeSelfAssesment = function(){
                    $scope.showSpinner = true;
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.markSelfAssesment}',
                        $scope.menteeDetail.Id,
                        function(result, event){
                            $scope.showSpinner = false;
                            if(event.status){
                                
                                $scope.showSpinner = false;
                            }   
                            $scope.showSpinner = false;
                            $scope.$apply();
                        },
                        {escape: true}
                    );  
                    
                }
                
                
                $scope.saveResult = function(){
                    $scope.selfAssessmentAnswers =[];
                    console.log($scope.selfAssessmentQuestions);
                    for(var i=0; i< $scope.selfAssessmentQuestions.length;i++){
                        for(var j=0; j< $scope.selfAssessmentQuestions[i].allQuestions.length;j++){
                            if($scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.FinalAnswer__c != null || $scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.FinalAnswer__c != undefined){
                                var responseVar = {"SelfAssessmentQuestion":$scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.Id};
                                
                                if($scope.selfAssessmentQuestions[i].allQuestions[j].questionRes != null && $scope.selfAssessmentQuestions[i].allQuestions[j].questionRes != undefined){
                                    responseVar.respId = $scope.selfAssessmentQuestions[i].allQuestions[j].questionRes.Id;
                                }
                                
                                if($scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.Type__c == 'Picklist')
                                    responseVar.AnswerPicklist = $scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.FinalAnswer__c;
                                if($scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.Type__c == 'Checkbox')
                                    responseVar.AnswerCheckbox = $scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.FinalAnswer__c;
                                if($scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.Type__c == 'Text')
                                    responseVar.AnswerText = $scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.FinalAnswer__c;
                                if($scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.Type__c == 'Number'){
                                	responseVar.AnswerNumber = $scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.FinalAnswer__c;
                                    if($scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.FinalAnswer__c > 5){
                                    	Swal.fire('please rate yourself on scale of 5', '', 'info')    
                                        return;
                                    }
                                }
                                    
                                
                                
                                // Handle for Integer - And generically think how to solve for all data type without multiple if
                                if($scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.Type__c == 'Date'){
                                    var dateVal = $scope.selfAssessmentQuestions[i].allQuestions[j].questionRec.FinalAnswer__c;
                                    var date = dateVal.getDate();
                                    var month = dateVal.getMonth();
                                    var year = dateVal.getFullYear();
                                    responseVar.AnswerDate = date;
                                    responseVar.AnswerMonth = month;
                                    responseVar.AnswerYear = year;
                                }
                                $scope.selfAssessmentAnswers.push(responseVar);
                            }else{
                                Swal.fire('Please complete Pre Self Assesment', '', 'info')
                                return;
                            }
                        }
                    }
                    $scope.showSpinner = true;
                    Visualforce.remoting.Manager.invokeAction(
                        '{!$RemoteAction.MenteePortal_Controller.insertSelfAssessmentAnswers}',
                        $scope.selfAssessmentAnswers,menteeId,
                        function(result,event){
                            $scope.showSpinner = false;
                            if(event.status){
                                let timerInterval
                                swal("Pre SelfAssesment submitted sucessfully!", "", "success");
                                $scope.markMenteeSelfAssesment();
                                $scope.homepage();
                            }
                            else if (event.type==='exception'){
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }else{
                                Swal.fire({
                                    icon: 'error',
                                    title: 'Internal error',
                                    text: 'Oops Something went wrong please refresh Page',
                                })
                            }
                        },
                        {escape:true});
                }
                $scope.onChange = function(textVal, typeVal,nameVal){ 
                    if(typeVal == 'Picklist'){
                        $scope.selfAssessmentAnswers.push({"SelfAssessmentQuestion":nameVal,"AnswerPicklist":textVal});
                    }
                    if(typeVal == 'Checkbox'){
                        $scope.selfAssessmentAnswers.push({"SelfAssessmentQuestion":nameVal,"AnswerCheckbox":textVal});
                    }
                    if(typeVal == 'Text'){
                        $scope.selfAssessmentAnswers.push({"SelfAssessmentQuestion":nameVal,"AnswerText":textVal});
                    }
                    if(typeVal == 'Date'){
                        var date = textVal.getDate();
                        var month = textVal.getMonth();
                        var year = textVal.getFullYear();
                        $scope.selfAssessmentAnswers.push({"SelfAssessmentQuestion":nameVal,"AnswerDate":date,'AnswerMonth':month,'AnswerYear':year});
                    }
                }
                $scope.optionValues ;
                
               
                $scope.selfAssesmentDetails = function(){
                    $scope.showProgramDetail = false;
                    $scope.showSessionListing = false;
                    $scope.showDetails = false;
                    $scope.editable = false;
                    $scope.showHomepage = false;
                    $scope.showMentorFeedback = false;
                    $scope.showSelfAssesment = true;
                    console.log($scope.selfAssessmentQuestions);
                }
                $scope.MentorFeedback = false;
                $scope.MenteeFeedback = false;
                $scope.closeFeedback = function(){
                    $scope.MentorFeedback = false;
                    $scope.MenteeFeedback = false;
                    document.getElementById('feedbackPopup').style.display='none';
                }
                
                $scope.feedbackByMentee = function(){
                    $scope.MentorFeedback = false;  
                    $scope.showAllMenteeFeedback = true;
                }
                $scope.showNoFeedbackByMentor = false;
                $scope.showFeedbackByMentor = function(){
                    $scope.MentorFeedback = true;
                    $scope.showAllMenteeFeedback = false;
                }
                
                $scope.closeDocumentPopup = function(){
                    document.getElementById('docsPopup').style.display='none';
                    
                }
                $scope.downloadDoc = function(attid){
                downloadDoc(attid);
            }
            });
             var counter=0;
        function downloadDoc(attid) {
            let anchorTagA = document.createElement('a');
            anchorTagA.href = '{!$Label.Mentorship_Site_URL}' + 'servlet/servlet.FileDownload?file=' + attid;
            anchorTagA.download = 'downloadDoc';
            anchorTagA.click();
           
        }
            </script>
        </div>
    </body>
</apex:page>